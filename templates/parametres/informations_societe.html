{% extends 'parametres/base_parametres.html' %}

{% block parametres_content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-building me-2"></i>Informations de la société
                </h5>
                <p class="text-muted mb-0">Configurez les informations de votre entreprise</p>
            </div>
            <div class="card-body">
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    
                    <!-- Informations de base -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="fas fa-info-circle me-2"></i>Informations de base
                            </h6>
                        </div>
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label for="{{ form.nom_raison_sociale.id_for_label }}" class="form-label">
                                    {{ form.nom_raison_sociale.label }}
                                </label>
                                {{ form.nom_raison_sociale }}
                                {% if form.nom_raison_sociale.help_text %}
                                    <div class="form-text">{{ form.nom_raison_sociale.help_text }}</div>
                                {% endif %}
                                {% if form.nom_raison_sociale.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.nom_raison_sociale.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.telephone_fixe.id_for_label }}" class="form-label">
                                    {{ form.telephone_fixe.label }}
                                </label>
                                {{ form.telephone_fixe }}
                                {% if form.telephone_fixe.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.telephone_fixe.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.telephone_portable.id_for_label }}" class="form-label">
                                    {{ form.telephone_portable.label }}
                                </label>
                                {{ form.telephone_portable }}
                                {% if form.telephone_portable.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.telephone_portable.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label for="{{ form.email.id_for_label }}" class="form-label">
                                    {{ form.email.label }}
                                </label>
                                {{ form.email }}
                                {% if form.email.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.email.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Adresse -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="fas fa-map-marker-alt me-2"></i>Adresse
                            </h6>
                        </div>
                        <div class="col-md-12">
                            <div class="mb-3">
                                <label for="{{ form.adresse.id_for_label }}" class="form-label">
                                    {{ form.adresse.label }}
                                </label>
                                {{ form.adresse }}
                                {% if form.adresse.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.adresse.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.ville.id_for_label }}" class="form-label">
                                    {{ form.ville.label }}
                                </label>
                                {{ form.ville }}
                                {% if form.ville.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.ville.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.code_postal.id_for_label }}" class="form-label">
                                    {{ form.code_postal.label }}
                                </label>
                                {{ form.code_postal }}
                                {% if form.code_postal.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.code_postal.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <label for="{{ form.pays.id_for_label }}" class="form-label">
                                    {{ form.pays.label }}
                                </label>
                                {{ form.pays }}
                                {% if form.pays.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.pays.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Web et documents -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="fas fa-globe me-2"></i>Web et documents
                            </h6>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.url_site.id_for_label }}" class="form-label">
                                    {{ form.url_site.label }}
                                </label>
                                {{ form.url_site }}
                                {% if form.url_site.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.url_site.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.logo.id_for_label }}" class="form-label">
                                    {{ form.logo.label }}
                                </label>
                                {{ form.logo }}
                                {% if societe.logo %}
                                    <div class="mt-2">
                                        <img src="{{ societe.logo.url }}" alt="Logo actuel" class="img-thumbnail" style="max-height: 100px;">
                                    </div>
                                {% endif %}
                                {% if form.logo.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.logo.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.bandeau_entete.id_for_label }}" class="form-label">
                                    <i class="fas fa-image me-2"></i>{{ form.bandeau_entete.label }}
                                </label>
                                {{ form.bandeau_entete }}
                                {% if societe.bandeau_entete %}
                                    <div class="mt-2">
                                        <img src="{{ societe.bandeau_entete.url }}" alt="Bandeau en-tête actuel" class="img-thumbnail" style="max-height: 100px; width: 100%;">
                                    </div>
                                {% endif %}
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>Cet en-tête sera utilisé dans tous les documents (devis, factures, etc.)<br>
                                    <i class="fas fa-ruler me-1"></i><strong>Taille recommandée :</strong> 800 x 150 pixels (largeur x hauteur)<br>
                                    <i class="fas fa-file-image me-1"></i><strong>Format :</strong> PNG ou JPEG
                                </div>
                                {% if form.bandeau_entete.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.bandeau_entete.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.bandeau_pied.id_for_label }}" class="form-label">
                                    <i class="fas fa-image me-2"></i>{{ form.bandeau_pied.label }}
                                </label>
                                {{ form.bandeau_pied }}
                                {% if societe.bandeau_pied %}
                                    <div class="mt-2">
                                        <img src="{{ societe.bandeau_pied.url }}" alt="Bandeau pied de page actuel" class="img-thumbnail" style="max-height: 100px; width: 100%;">
                                    </div>
                                {% endif %}
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>Ce pied de page sera utilisé dans tous les documents<br>
                                    <i class="fas fa-ruler me-1"></i><strong>Taille recommandée :</strong> 800 x 100 pixels (largeur x hauteur)<br>
                                    <i class="fas fa-file-image me-1"></i><strong>Format :</strong> PNG ou JPEG
                                </div>
                                {% if form.bandeau_pied.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.bandeau_pied.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Informations légales -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">
                                <i class="fas fa-gavel me-2"></i>Informations légales
                            </h6>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.numero_registre_commerce.id_for_label }}" class="form-label">
                                    {{ form.numero_registre_commerce.label }}
                                </label>
                                {{ form.numero_registre_commerce }}
                                {% if form.numero_registre_commerce.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.numero_registre_commerce.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.numero_contribuable.id_for_label }}" class="form-label">
                                    {{ form.numero_contribuable.label }}
                                </label>
                                {{ form.numero_contribuable }}
                                {% if form.numero_contribuable.errors %}
                                    <div class="invalid-feedback d-block">
                                        {% for error in form.numero_contribuable.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boutons d'action -->
                    <div class="row">
                        <div class="col-12">
                            <div class="d-flex justify-content-end gap-2">
                                <a href="{% url 'parametres:tableau_bord' %}" class="btn btn-secondary">
                                    <i class="fas fa-arrow-left me-2"></i>Retour
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i>Enregistrer les informations
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Aperçu et aide -->
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-eye me-2"></i>Aperçu
                </h5>
            </div>
            <div class="card-body">
                {% if societe.logo %}
                    <div class="text-center mb-3">
                        <img src="{{ societe.logo.url }}" alt="Logo de la société" class="img-fluid" style="max-height: 150px;">
                    </div>
                {% endif %}
                
                <div class="mb-3">
                    <h6>Informations actuelles :</h6>
                    <ul class="list-unstyled">
                        <li><strong>Nom :</strong> {{ societe.nom_raison_sociale }}</li>
                        <li><strong>Email :</strong> {{ societe.email|default:"Non renseigné" }}</li>
                        <li><strong>Téléphone :</strong> {{ societe.telephone_fixe|default:"Non renseigné" }}</li>
                        <li><strong>Ville :</strong> {{ societe.ville|default:"Non renseigné" }}</li>
                        <li><strong>Pays :</strong> {{ societe.pays|default:"Non renseigné" }}</li>
                    </ul>
                </div>
                
                <div class="alert alert-info">
                    <h6><i class="fas fa-lightbulb me-2"></i>Conseils</h6>
                    <ul class="mb-0">
                        <li>Le logo sera affiché sur tous les documents</li>
                        <li>Les bandeaux d'en-tête et pied de page sont optionnels</li>
                        <li>Format recommandé pour les bandeaux : PNG ou JPEG</li>
                        <li>Les informations légales sont importantes pour la facturation</li>
                        <li>L'URL du site peut être utilisée dans les documents</li>
                    </ul>
                </div>
                
                <div class="alert alert-warning">
                    <h6><i class="fas fa-exclamation-triangle me-2"></i>Important</h6>
                    <p class="mb-0">
                        Ces informations seront utilisées dans tous les documents générés par l'application.
                        Assurez-vous qu'elles sont exactes et à jour.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
